
%-----------------------------------------------------------------------------
% Chapter: System Design
%-----------------------------------------------------------------------------

\chapter{System Design}
\label{chap:SYSDES}

With all the key requirements being laid out in the previous chapter, it is
time to analyze them and have a system design model in an abstract
level drawn. 

\section{Specifications}
Non-functional requirements will be investigated first to decide the
non-behavioral specifications of the system, specifications like the
programming language and framework that powers the system, choice of database,
and environment in which the system will be running.

\subsection{Framework}
Debate on whether or not it is better to use a framework is never failed to be
a popular topic in the developer communities. On one hand, many developers
believe that a framework puts a lot of constrains to a project which limits the
overall control to the project (especially core behaviors) \cite{frameworks};
on the other hand, a framework offers a better degree of efficiency and better
measurements of security to a project, while keeping the simplicity and
the architectural clarity of the project by enforcing the developers to apply
an architectural pattern (such as the \emph{model-view-controller} pattern
\cite{mvc}) to their code.

\medskip

Given the development time frame, requirements for
security and maintainability (see 2.3.1, 2.3.2 and 2.3.3),
as well as the scale of the this project,
it is not unjustifiable for this project to use a web framework to achieve a
better result.

\medskip

The framework this project uses is called \emph{Django}, an open-source web
framework written in \emph{Python}. \emph{Django} was originally developed by
the web programming team at the \emph{Lawrence Journal-World} newspaper in 2003,
dedicated for the the company to deliver their contents as fast as possible
(James Bennett, 2008 \cite{django}). With more than a decade of improvements
being made to the framework, it is now among one of the most popular web
frameworks in the world, used by large companies and organizations like the
\emph{Washington Post} (Adrian Holovaty, 2005 \cite{djangoWashingtonPost})
and \emph{Instagram} (Instagram Engineering, 2011 \cite{djangoInstagram}).
\medskip

The \emph{Django} framework provides a set of libraries to handle most basic
aspects of web application development. One good example of those libraries is
the \emph{object-relational mapper}, the framework has the capability to create
relational database schemas based on the \emph{Python} data model classes
written by the developer, so that no raw SQL query is required
(James Bennett, 2008 \cite{django}) for most of the
database operations (such as select, filter, remove, and insert database
records),
making the possibility of having \emph{SQL Injection} vulnerabilities next
to zero.

\subsection{Database}
The \emph{Course2018} LMS uses \emph{PostgreSQL} as the default database
management system, primarily because its extendibility (such as direct
support of inheritance and document data types), which can be used for
development in the future of more advanced features without worrying the
limitations of the database management system~\cite{postgres}.

\medskip

Furthermore, if future developments really require a change of database
management system,
with the \emph{Django} framework's database libraries,
switching between different database management systems only requires
modification of a few lines of code in the setting file.

\subsection{Environment}
With the amount of functional requirements (see 2.2), it is not difficult for
one to forsee that there will be some external packages introduced to the
\emph{Course2018} LMS.
Additionally, it is highly possible that this system will be hosted
on a server along with other existing services, thus, to avoid packages that
are required for this system conflict with those existing services, an
isolated environment for this system is desired.

\medskip
The \emph{Django} project official guide~\cite{djangoGuide} recommends using
a tool called \emph{virtualenv} to create an isolated environment, however,
this tool is only capable of isolating \emph{Python} packages, and the
\emph{Course2018} LMS most likely need to have some system packages (such as
compilers) isolated as well.

\medskip

Conventional virtualization (i.e., hardware virtualization, a method for a
host computer system to simulate a hardware environment on which the guest
application can be ran completely independent from the environment of the host
system, with dedicated resources from the host system~\citep[chap. 16]{os}),
a \emph{virtual machine} (VM), could be a simple and easy solution to solve
this, but the overhead of a VM and the changes need to be applied to the host
system for an efficient VM (such as 
\emph{kernel-based virtual machine}~\cite{kvm}) is overwhelming;
besides, there is no easy way for the host system to provide a flexible
resource allocation for any VM.

\subsubsection{Containerization}
\emph{Operating-system-level virtualization}, also known as
\emph{containerization}, is an operating system (OS) feature offered by the
kernel of the OS allowing multiple isolated user-space~\citep[chap. 1.5.1]{os}
instances exist at the same time~(John~Fink~\cite{docker}),
each of these instances is called a \emph{container}, and no dedicated resource
is required to be allocated for these instances which makes them much more
flexible than a conventional VM. Further, with the same hardware system and
OS kernel as the host system being used, the overhead of a container is
generally considered to be next to nothing (compared to conventional VMs).

\pagebreak

Following are the results of the \texttt{uname} command
(a command to show the kernel version of a Unix or Unix-like OS)
on an \emph{Arch Linux} host system, a container on the host system
with a \emph{Debian}~\cite{debian} image, and a \emph{kernel-based VM} (KVM)
on the host system with \emph{macOS 10.13.4} installed.

\begin{centering}
\lstinputlisting[caption=uname command on a \emph{Arch Linux} host system,
label=lst:UNAME_HOST, numbers=none]{./examples/uname-host.txt}
\lstinputlisting[caption=uname command in a containerized \emph{Debian}
environment,
label=lst:UNAME_HOST, numbers=none]{./examples/uname-host.txt}
\lstinputlisting[caption=uname command in a \emph{macOS} KVM,
label=lst:UNAME_HOST, numbers=none]{./examples/uname-kvm.txt}
\end{centering}

\subsubsection{Docker}
The \emph{Course2018} LMS is encapsulated in a container based on a
\emph{Debian} image, using a container management system called \emph{Docker},
an open-source implementation of \emph{OS-level~VM} developed by
\emph{Docker Inc}.

\medskip

With \emph{Docker}, the finished product of the
\emph{Course2018} LMS, along with all its dependencies, can be packed, shipped
and ran on any host system with the exact environment as it was on the
developer's computer system. Therefore, the deployment process of the
\emph{Course2018} LMS will be as simple as one command.



\section{System modules}